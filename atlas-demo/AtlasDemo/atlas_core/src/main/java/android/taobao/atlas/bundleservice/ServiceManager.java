package android.taobao.atlas.bundleservice;

/**
 * Created by guanjie on 2017/4/27.
 */

public class ServiceManager {

    public <R,T> R execute(RemoteFunc<R,T> func,Class<T> iinterface){
        T serviceImpl = obtainService(iinterface);
        func.setImpl(serviceImpl);
        R result = func.call(func.impl,func.mArgs);
        //todo update reference
        return result;
    }

    public <T> T obtainService(Class<T> t){
        //todo return serviceImpl
        return null;
    }

    public abstract class RemoteFunc<R,T>{

        private Object[] mArgs;
        private T impl;

        public RemoteFunc(Object ... args){
            mArgs = args;
        }

        public void setImpl(T t){
            impl = t;
        }
        public abstract R call(T impl,Object[] args);
    }
}
